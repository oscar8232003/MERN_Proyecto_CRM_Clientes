{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\oscar\\\\Desktop\\\\Node\\\\Node_ReactJS\\\\Front-end-app\\\\src\\\\components\\\\productos\\\\NuevoProducto.js\";\nimport React, { useState, useEffect } from \"react\";\nimport clienteAxios from \"../../config/axios\";\nimport Swal from \"sweetalert2\";\nimport { withRouter } from \"react-router-dom\";\nimport { verificacionToken } from \"../../config/jwt\";\n\nconst NuevoProducto = ({\n  history\n}) => {\n  //Estados\n  const [producto, setProducto] = useState({\n    nombre: \"\",\n    precio: \"\"\n  });\n  const [archivo, setArchivo] = useState(\"\");\n  const [usuario, setUsuario] = useState({}); //Traemos el Token del localStorage, tiene que ser directo sino toma el token expirado\n\n  const Token = localStorage.getItem(\"token\"); //Verificamos el Token si es valido o no\n\n  const verificar = verificacionToken(Token); //Leer los datos del formulario\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    if (!producto.nombre || !producto.precio || !archivo) {\n      Swal.fire({\n        icon: \"error\",\n        title: \"Lo siento, todos los campos deben estar llenos\",\n        text: \"\"\n      });\n      return null;\n    } // crear un formdata\n\n\n    const formData = new FormData();\n    formData.append(\"nombre\", producto.nombre);\n    formData.append(\"precio\", producto.precio);\n    formData.append(\"imagen\", archivo); // almacenarlo en la BD\n\n    try {\n      const res = await clienteAxios.post(\"/productos\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: `Bearer ${Token}`\n        }\n      }); // Lanzar una alerta\n\n      if (res.status === 200) {\n        Swal.fire(\"Agregado Correctamente\", res.data.mensaje, \"success\");\n      } // redireccionar\n\n\n      history.push(\"/productos\");\n    } catch (error) {\n      console.log(error); // lanzar alerta\n\n      Swal.fire({\n        icon: \"error\",\n        title: \"Hubo un error\",\n        text: \"Vuelva a intentarlo\"\n      });\n\n      if (verificar.error) {\n        history.push(\"/iniciar-sesion\");\n      }\n    }\n  }; //Leer informacion de los productos\n\n\n  const leerInformacionProducto = async e => {\n    setProducto({ ...producto,\n      [e.target.name]: e.target.value\n    });\n  }; //Coloca la imagen en el state\n\n\n  const leerArchivo = e => {\n    setArchivo(e.target.files[0]);\n  }; //Validar que el formulario no este vacio\n\n\n  const validarFormulario = () => {\n    let validador = !producto.nombre || !producto.precio || !archivo;\n    return validador;\n  }; //useEffect\n\n\n  useEffect(() => {\n    if (verificar.error) {\n      history.push(\"/iniciar-sesion\");\n    }\n\n    setUsuario(verificar);\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"Nuevo Producto\"), React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(\"legend\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"Llena todos los campos\"), React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, \"Nombre:\"), React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Nombre Producto\",\n    name: \"nombre\",\n    onChange: leerInformacionProducto,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, \"Precio:\"), React.createElement(\"input\", {\n    type: \"number\",\n    name: \"precio\",\n    min: \"0.00\",\n    step: \"0.01\",\n    placeholder: \"Precio\",\n    onChange: leerInformacionProducto,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, \"Imagen:\"), React.createElement(\"input\", {\n    type: \"file\",\n    name: \"imagen\",\n    onChange: leerArchivo,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"enviar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"btn btn-azul\",\n    value: \"Agregar Producto\",\n    disabled: validarFormulario(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }))));\n};\n\nexport default withRouter(NuevoProducto);","map":{"version":3,"sources":["C:/Users/oscar/Desktop/Node/Node_ReactJS/Front-end-app/src/components/productos/NuevoProducto.js"],"names":["React","useState","useEffect","clienteAxios","Swal","withRouter","verificacionToken","NuevoProducto","history","producto","setProducto","nombre","precio","archivo","setArchivo","usuario","setUsuario","Token","localStorage","getItem","verificar","handleSubmit","e","preventDefault","fire","icon","title","text","formData","FormData","append","res","post","headers","Authorization","status","data","mensaje","push","error","console","log","leerInformacionProducto","target","name","value","leerArchivo","files","validarFormulario","validador"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,YAAP,MAAyB,oBAAzB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,iBAAT,QAAkC,kBAAlC;;AAEA,MAAMC,aAAa,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAiB;AACrC;AACA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAC;AACvCU,IAAAA,MAAM,EAAE,EAD+B;AAEvCC,IAAAA,MAAM,EAAE;AAF+B,GAAD,CAAxC;AAIA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBb,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACc,OAAD,EAAUC,UAAV,IAAwBf,QAAQ,CAAC,EAAD,CAAtC,CAPqC,CASrC;;AACA,QAAMgB,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CAVqC,CAWrC;;AACA,QAAMC,SAAS,GAAGd,iBAAiB,CAACW,KAAD,CAAnC,CAZqC,CAcrC;;AACA,QAAMI,YAAY,GAAG,MAAMC,CAAN,IAAW;AAC9BA,IAAAA,CAAC,CAACC,cAAF;;AAEA,QAAI,CAACd,QAAQ,CAACE,MAAV,IAAoB,CAACF,QAAQ,CAACG,MAA9B,IAAwC,CAACC,OAA7C,EAAsD;AACpDT,MAAAA,IAAI,CAACoB,IAAL,CAAU;AACRC,QAAAA,IAAI,EAAE,OADE;AAERC,QAAAA,KAAK,EAAE,gDAFC;AAGRC,QAAAA,IAAI,EAAE;AAHE,OAAV;AAKA,aAAO,IAAP;AACD,KAV6B,CAY9B;;;AACA,UAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0BrB,QAAQ,CAACE,MAAnC;AACAiB,IAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0BrB,QAAQ,CAACG,MAAnC;AACAgB,IAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0BjB,OAA1B,EAhB8B,CAkB9B;;AACA,QAAI;AACF,YAAMkB,GAAG,GAAG,MAAM5B,YAAY,CAAC6B,IAAb,CAAkB,YAAlB,EAAgCJ,QAAhC,EAA0C;AAC1DK,QAAAA,OAAO,EAAE;AACP,0BAAgB,qBADT;AAEPC,UAAAA,aAAa,EAAG,UAASjB,KAAM;AAFxB;AADiD,OAA1C,CAAlB,CADE,CAQF;;AACA,UAAIc,GAAG,CAACI,MAAJ,KAAe,GAAnB,EAAwB;AACtB/B,QAAAA,IAAI,CAACoB,IAAL,CAAU,wBAAV,EAAoCO,GAAG,CAACK,IAAJ,CAASC,OAA7C,EAAsD,SAAtD;AACD,OAXC,CAaF;;;AACA7B,MAAAA,OAAO,CAAC8B,IAAR,CAAa,YAAb;AACD,KAfD,CAeE,OAAOC,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,EADc,CAEd;;AACAnC,MAAAA,IAAI,CAACoB,IAAL,CAAU;AACRC,QAAAA,IAAI,EAAE,OADE;AAERC,QAAAA,KAAK,EAAE,eAFC;AAGRC,QAAAA,IAAI,EAAE;AAHE,OAAV;;AAMA,UAAIP,SAAS,CAACmB,KAAd,EAAqB;AACnB/B,QAAAA,OAAO,CAAC8B,IAAR,CAAa,iBAAb;AACD;AACF;AACF,GA/CD,CAfqC,CAgErC;;;AACA,QAAMI,uBAAuB,GAAG,MAAMpB,CAAN,IAAW;AACzCZ,IAAAA,WAAW,CAAC,EACV,GAAGD,QADO;AAEV,OAACa,CAAC,CAACqB,MAAF,CAASC,IAAV,GAAiBtB,CAAC,CAACqB,MAAF,CAASE;AAFhB,KAAD,CAAX;AAID,GALD,CAjEqC,CAwErC;;;AACA,QAAMC,WAAW,GAAGxB,CAAC,IAAI;AACvBR,IAAAA,UAAU,CAACQ,CAAC,CAACqB,MAAF,CAASI,KAAT,CAAe,CAAf,CAAD,CAAV;AACD,GAFD,CAzEqC,CA6ErC;;;AACA,QAAMC,iBAAiB,GAAG,MAAM;AAC9B,QAAIC,SAAS,GAAG,CAACxC,QAAQ,CAACE,MAAV,IAAoB,CAACF,QAAQ,CAACG,MAA9B,IAAwC,CAACC,OAAzD;AACA,WAAOoC,SAAP;AACD,GAHD,CA9EqC,CAmFrC;;;AACA/C,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIkB,SAAS,CAACmB,KAAd,EAAqB;AACnB/B,MAAAA,OAAO,CAAC8B,IAAR,CAAa,iBAAb;AACD;;AACDtB,IAAAA,UAAU,CAACI,SAAD,CAAV;AACD,GALQ,EAKN,EALM,CAAT;AAOA,SACE,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAGE;AAAM,IAAA,QAAQ,EAAEC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,EAGE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAEE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,iBAFd;AAGE,IAAA,IAAI,EAAC,QAHP;AAIE,IAAA,QAAQ,EAAEqB,uBAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAHF,EAaE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAEE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,IAAI,EAAC,QAFP;AAGE,IAAA,GAAG,EAAC,MAHN;AAIE,IAAA,IAAI,EAAC,MAJP;AAKE,IAAA,WAAW,EAAC,QALd;AAME,IAAA,QAAQ,EAAEA,uBANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAbF,EAyBE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAEE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,IAAI,EAAC,QAAxB;AAAiC,IAAA,QAAQ,EAAEI,WAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAzBF,EA8BE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,SAAS,EAAC,cAFZ;AAGE,IAAA,KAAK,EAAC,kBAHR;AAIE,IAAA,QAAQ,EAAEE,iBAAiB,EAJ7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CA9BF,CAHF,CADF;AA6CD,CAxID;;AA0IA,eAAe3C,UAAU,CAACE,aAAD,CAAzB","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport clienteAxios from \"../../config/axios\";\r\nimport Swal from \"sweetalert2\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { verificacionToken } from \"../../config/jwt\";\r\n\r\nconst NuevoProducto = ({ history }) => {\r\n  //Estados\r\n  const [producto, setProducto] = useState({\r\n    nombre: \"\",\r\n    precio: \"\"\r\n  });\r\n  const [archivo, setArchivo] = useState(\"\");\r\n  const [usuario, setUsuario] = useState({});\r\n\r\n  //Traemos el Token del localStorage, tiene que ser directo sino toma el token expirado\r\n  const Token = localStorage.getItem(\"token\");\r\n  //Verificamos el Token si es valido o no\r\n  const verificar = verificacionToken(Token);\r\n\r\n  //Leer los datos del formulario\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n\r\n    if (!producto.nombre || !producto.precio || !archivo) {\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Lo siento, todos los campos deben estar llenos\",\r\n        text: \"\"\r\n      });\r\n      return null;\r\n    }\r\n\r\n    // crear un formdata\r\n    const formData = new FormData();\r\n    formData.append(\"nombre\", producto.nombre);\r\n    formData.append(\"precio\", producto.precio);\r\n    formData.append(\"imagen\", archivo);\r\n\r\n    // almacenarlo en la BD\r\n    try {\r\n      const res = await clienteAxios.post(\"/productos\", formData, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n          Authorization: `Bearer ${Token}`\r\n        }\r\n      });\r\n\r\n      // Lanzar una alerta\r\n      if (res.status === 200) {\r\n        Swal.fire(\"Agregado Correctamente\", res.data.mensaje, \"success\");\r\n      }\r\n\r\n      // redireccionar\r\n      history.push(\"/productos\");\r\n    } catch (error) {\r\n      console.log(error);\r\n      // lanzar alerta\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Hubo un error\",\r\n        text: \"Vuelva a intentarlo\"\r\n      });\r\n\r\n      if (verificar.error) {\r\n        history.push(\"/iniciar-sesion\");\r\n      }\r\n    }\r\n  };\r\n\r\n  //Leer informacion de los productos\r\n  const leerInformacionProducto = async e => {\r\n    setProducto({\r\n      ...producto,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  //Coloca la imagen en el state\r\n  const leerArchivo = e => {\r\n    setArchivo(e.target.files[0]);\r\n  };\r\n\r\n  //Validar que el formulario no este vacio\r\n  const validarFormulario = () => {\r\n    let validador = !producto.nombre || !producto.precio || !archivo;\r\n    return validador;\r\n  };\r\n\r\n  //useEffect\r\n  useEffect(() => {\r\n    if (verificar.error) {\r\n      history.push(\"/iniciar-sesion\");\r\n    }\r\n    setUsuario(verificar);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <h2>Nuevo Producto</h2>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <legend>Llena todos los campos</legend>\r\n\r\n        <div className=\"campo\">\r\n          <label>Nombre:</label>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Nombre Producto\"\r\n            name=\"nombre\"\r\n            onChange={leerInformacionProducto}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"campo\">\r\n          <label>Precio:</label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"precio\"\r\n            min=\"0.00\"\r\n            step=\"0.01\"\r\n            placeholder=\"Precio\"\r\n            onChange={leerInformacionProducto}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"campo\">\r\n          <label>Imagen:</label>\r\n          <input type=\"file\" name=\"imagen\" onChange={leerArchivo} />\r\n        </div>\r\n\r\n        <div className=\"enviar\">\r\n          <input\r\n            type=\"submit\"\r\n            className=\"btn btn-azul\"\r\n            value=\"Agregar Producto\"\r\n            disabled={validarFormulario()}\r\n          />\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withRouter(NuevoProducto);\r\n"]},"metadata":{},"sourceType":"module"}