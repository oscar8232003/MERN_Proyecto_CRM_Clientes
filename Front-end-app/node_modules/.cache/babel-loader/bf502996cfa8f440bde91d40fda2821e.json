{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\oscar\\\\Desktop\\\\Node\\\\Node_ReactJS\\\\Front-end-app\\\\src\\\\components\\\\productos\\\\Productos.js\";\nimport React, { useState, useEffect } from \"react\";\nimport clienteAxios from \"../../config/axios\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport Spinner from \"../layout/Spinner\";\nimport { verificacionToken } from \"../../config/jwt\"; //Componente Producto\n\nimport Producto from \"./Producto\";\n\nconst Productos = props => {\n  //Estados\n  const [productos, setProductos] = useState([]);\n  const [usuario, setUsuario] = useState({}); //Traemos el Token del localStorage, tiene que ser directo sino toma el token expirado\n\n  const Token = localStorage.getItem(\"token\"); //Verificamos el Token si es valido o no\n\n  const verificar = verificacionToken(Token); //Traer Productos\n\n  const consultarAPI = async () => {\n    const productosData = await clienteAxios.get(\"/productos\", {\n      headers: {\n        Authorization: `Bearer ${Token}`\n      }\n    });\n    setProductos(productosData.data);\n  }; //useEffect\n\n\n  useEffect(() => {\n    if (verificar.error) {\n      props.history.push(\"/iniciar-sesion\");\n    }\n\n    setUsuario(verificar);\n    consultarAPI();\n  }, []);\n  if (!productos.length) return React.createElement(Spinner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  });\n  return React.createElement(React.Fragment, null, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, \"Productos\"), React.createElement(Link, {\n    to: \"/productos/nuevo\",\n    className: \"btn btn-verde nvo-cliente\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fas fa-plus-circle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }), \"Nuevo Producto\"), React.createElement(\"ul\", {\n    className: \"listado-productos\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }), productos.map(producto => React.createElement(Producto, {\n    producto: producto,\n    key: producto._id,\n    consultarAPI: consultarAPI,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  })));\n};\n\nexport default withRouter(Productos);","map":{"version":3,"sources":["C:/Users/oscar/Desktop/Node/Node_ReactJS/Front-end-app/src/components/productos/Productos.js"],"names":["React","useState","useEffect","clienteAxios","Link","withRouter","Spinner","verificacionToken","Producto","Productos","props","productos","setProductos","usuario","setUsuario","Token","localStorage","getItem","verificar","consultarAPI","productosData","get","headers","Authorization","data","error","history","push","length","map","producto","_id"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,YAAP,MAAyB,oBAAzB;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC;AACA,OAAOC,OAAP,MAAoB,mBAApB;AACA,SAASC,iBAAT,QAAkC,kBAAlC,C,CAEA;;AACA,OAAOC,QAAP,MAAqB,YAArB;;AAEA,MAAMC,SAAS,GAAGC,KAAK,IAAI;AACzB;AACA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BX,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACY,OAAD,EAAUC,UAAV,IAAwBb,QAAQ,CAAC,EAAD,CAAtC,CAHyB,CAKzB;;AACA,QAAMc,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CANyB,CAOzB;;AACA,QAAMC,SAAS,GAAGX,iBAAiB,CAACQ,KAAD,CAAnC,CARyB,CAUzB;;AACA,QAAMI,YAAY,GAAG,YAAY;AAC/B,UAAMC,aAAa,GAAG,MAAMjB,YAAY,CAACkB,GAAb,CAAiB,YAAjB,EAA+B;AACzDC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAASR,KAAM;AADxB;AADgD,KAA/B,CAA5B;AAKAH,IAAAA,YAAY,CAACQ,aAAa,CAACI,IAAf,CAAZ;AACD,GAPD,CAXyB,CAoBzB;;;AACAtB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIgB,SAAS,CAACO,KAAd,EAAqB;AACnBf,MAAAA,KAAK,CAACgB,OAAN,CAAcC,IAAd,CAAmB,iBAAnB;AACD;;AACDb,IAAAA,UAAU,CAACI,SAAD,CAAV;AACAC,IAAAA,YAAY;AACb,GANQ,EAMN,EANM,CAAT;AAQA,MAAI,CAACR,SAAS,CAACiB,MAAf,EAAuB,OAAO,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AAEvB,SACE,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAGE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAE,kBAAV;AAA8B,IAAA,SAAS,EAAC,2BAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAG,IAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,mBAHF,EAQE;AAAI,IAAA,SAAS,EAAC,mBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,EASGjB,SAAS,CAACkB,GAAV,CAAcC,QAAQ,IACrB,oBAAC,QAAD;AACE,IAAA,QAAQ,EAAEA,QADZ;AAEE,IAAA,GAAG,EAAEA,QAAQ,CAACC,GAFhB;AAGE,IAAA,YAAY,EAAEZ,YAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CATH,CADF;AAmBD,CAlDD;;AAoDA,eAAed,UAAU,CAACI,SAAD,CAAzB","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport clienteAxios from \"../../config/axios\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport Spinner from \"../layout/Spinner\";\r\nimport { verificacionToken } from \"../../config/jwt\";\r\n\r\n//Componente Producto\r\nimport Producto from \"./Producto\";\r\n\r\nconst Productos = props => {\r\n  //Estados\r\n  const [productos, setProductos] = useState([]);\r\n  const [usuario, setUsuario] = useState({});\r\n\r\n  //Traemos el Token del localStorage, tiene que ser directo sino toma el token expirado\r\n  const Token = localStorage.getItem(\"token\");\r\n  //Verificamos el Token si es valido o no\r\n  const verificar = verificacionToken(Token);\r\n\r\n  //Traer Productos\r\n  const consultarAPI = async () => {\r\n    const productosData = await clienteAxios.get(\"/productos\", {\r\n      headers: {\r\n        Authorization: `Bearer ${Token}`\r\n      }\r\n    });\r\n    setProductos(productosData.data);\r\n  };\r\n\r\n  //useEffect\r\n  useEffect(() => {\r\n    if (verificar.error) {\r\n      props.history.push(\"/iniciar-sesion\");\r\n    }\r\n    setUsuario(verificar);\r\n    consultarAPI();\r\n  }, []);\r\n\r\n  if (!productos.length) return <Spinner />;\r\n\r\n  return (\r\n    <>\r\n      <h2>Productos</h2>\r\n\r\n      <Link to={\"/productos/nuevo\"} className=\"btn btn-verde nvo-cliente\">\r\n        <i className=\"fas fa-plus-circle\"></i>\r\n        Nuevo Producto\r\n      </Link>\r\n\r\n      <ul className=\"listado-productos\"></ul>\r\n      {productos.map(producto => (\r\n        <Producto\r\n          producto={producto}\r\n          key={producto._id}\r\n          consultarAPI={consultarAPI}\r\n        ></Producto>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withRouter(Productos);\r\n"]},"metadata":{},"sourceType":"module"}